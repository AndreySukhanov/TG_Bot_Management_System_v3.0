# üìä –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Looker Studio –¥–ª—è Telegram-–±–æ—Ç–∞

## üéØ –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –≤ Google Looker Studio –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π Telegram-–±–æ—Ç–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
Telegram Bot ‚Üí SQLite Database ‚Üí FastAPI ‚Üí Google Sheets ‚Üí Looker Studio
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API

### API Endpoints
- **URL:** `http://YOUR_SERVER:8002/`
- **Authentication:** Bearer Token
- **Token:** `RfgLep4Y7nWjXky5qA0lpwV2E6kyZiOBkrKrHo7cl3k`

### –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:
- `/payments` - –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏
- `/balance-history` - –∏—Å—Ç–æ—Ä–∏—è –±–∞–ª–∞–Ω—Å–∞
- `/projects` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- `/daily-stats` - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/users` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
1. –°–æ–∑–¥–∞–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É: "–î–∞–Ω–Ω—ã–µ Telegram –ë–æ—Ç–∞"
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** ‚Üí **Apps Script**
3. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 2. Apps Script –∫–æ–¥

```javascript
function updateAllData() {
  updatePayments();
  updateBalance();
  updateTeam();
  updatePending();
  updateToday();
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö...
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
1. –í Apps Script: **–¢—Ä–∏–≥–≥–µ—Ä—ã** ‚Üí **–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä**
2. –§—É–Ω–∫—Ü–∏—è: `updateAllData`
3. –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è: **–ü–æ –≤—Ä–µ–º–µ–Ω–∏**
4. –ò–Ω—Ç–µ—Ä–≤–∞–ª: **–ö–∞–∂–¥—ã–π —á–∞—Å** (–∏–ª–∏ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)

## üé® –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ –≤ Looker Studio

### –î–∞—à–±–æ—Ä–¥ 1: –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –õ–∏—Å—Ç "–ë–∞–ª–∞–Ω—Å"

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- **–í—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- **–ö–∞—Ä—Ç–æ—á–∫–∞:** –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- **–¢–∞–±–ª–∏—Ü–∞:** –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

### –î–∞—à–±–æ—Ä–¥ 2: –ö–æ–º–∞–Ω–¥–∞
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –õ–∏—Å—Ç "–ö–æ–º–∞–Ω–¥–∞"

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- **–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞:** –¢–æ–ø –ø–æ —Ç—Ä–∞—Ç–∞–º
- **–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞:** –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
- **–¢–∞–±–ª–∏—Ü–∞:** –î–µ—Ç–∞–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –î–∞—à–±–æ—Ä–¥ 3: –û–∂–∏–¥–∞—é—â–∏–µ –æ–ø–ª–∞—Ç—ã
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –õ–∏—Å—Ç "–û–∂–∏–¥–∞—é—â–∏–µ"

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- **–ö–∞—Ä—Ç–æ—á–∫–∞:** –°—É–º–º–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö
- **–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞:** –ü–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- **–¢–∞–±–ª–∏—Ü–∞:** –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫

### –î–∞—à–±–æ—Ä–¥ 4: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –õ–∏—Å—Ç "–°–µ–≥–æ–¥–Ω—è"

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- **3 –∫–∞—Ä—Ç–æ—á–∫–∏:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—É–º–º–∞, –ø—Ä–æ–µ–∫—Ç—ã
- **–í—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥:** –î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è Google Cloud
ufw allow from 35.235.240.0/20 to any port 8002
ufw allow from 130.211.0.0/22 to any port 8002
ufw allow from 35.191.0.0/16 to any port 8002
```

### API Authentication
- –í—Å–µ endpoints –∑–∞—â–∏—â–µ–Ω—ã Bearer —Ç–æ–∫–µ–Ω–æ–º
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è Looker Studio –¥–æ–º–µ–Ω–æ–≤

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Systemd —Å–µ—Ä–≤–∏—Å
```ini
[Unit]
Description=Looker Studio API –¥–ª—è Telegram –±–æ—Ç–∞
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/telegram-bot
Environment=PATH=/opt/telegram-bot/venv/bin
ExecStart=/opt/telegram-bot/venv/bin/python full_looker_api.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```bash
systemctl enable looker-api
systemctl start looker-api
```

## üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Looker Studio** –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞: `systemctl status looker-api`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `journalctl -u looker-api -f`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `ufw status`

### –î–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ Apps Script
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ API —Ç–æ–∫–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Looker Studio –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
1. –û–±–Ω–æ–≤–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Google –¢–∞–±–ª–∏—Ü–µ
3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–∞–Ω–Ω—ã–º

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã Google
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ** - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –±–µ–∑ —É—á–∞—Å—Ç–∏—è —á–µ–ª–æ–≤–µ–∫–∞
- **–ú–æ–±–∏–ª—å–Ω–æ** - –¥–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã —Ç–æ–∫–µ–Ω–∞–º–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ firewall
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞

---

*–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!*